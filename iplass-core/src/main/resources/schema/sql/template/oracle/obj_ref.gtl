/* drop/create OBJ_REF */
DROP TABLE "OBJ_REF${tableNamePostfix}" CASCADE CONSTRAINT;

CREATE TABLE "OBJ_REF${tableNamePostfix}" 
(
    "TENANT_ID" NUMBER(7,0) NOT NULL, 
    "OBJ_DEF_ID" VARCHAR2(128) NOT NULL, 
    "REF_DEF_ID" VARCHAR2(128) NOT NULL, 
    "OBJ_ID" VARCHAR2(64) NOT NULL, 
    "OBJ_VER" NUMBER(10,0) DEFAULT 0 NOT NULL,
    "TARGET_OBJ_DEF_ID" VARCHAR2(128) NOT NULL, 
    "TARGET_OBJ_ID" VARCHAR2(64) NOT NULL,
    "TARGET_OBJ_VER" NUMBER(10,0) DEFAULT 0 NOT NULL
)
<%if (partition) {
%>PARTITION BY RANGE (TENANT_ID) INTERVAL(1)
SUBPARTITION BY HASH (OBJ_DEF_ID) SUBPARTITIONS 8
(
    PARTITION OBJ_REF${tableNamePostfix}_0 VALUES LESS THAN (1)
)
<%}
%>;

CREATE INDEX "OBJ_REF${tableNamePostfix}_INDEX1" ON "OBJ_REF${tableNamePostfix}" ("TENANT_ID", "OBJ_DEF_ID", "OBJ_ID", "REF_DEF_ID") <%if (partition) {%>LOCAL<%}%>;
CREATE INDEX "OBJ_REF${tableNamePostfix}_INDEX2" ON "OBJ_REF${tableNamePostfix}" ("TENANT_ID", "TARGET_OBJ_DEF_ID", "TARGET_OBJ_ID", "REF_DEF_ID") <%if (partition) {%>LOCAL<%}%>;
